# Migration `20200130010155-create-base-models`

This migration has been generated by andres at 1/30/2020, 1:01:55 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Content" (
    "author" text  NOT NULL DEFAULT '',
    "course" text   ,
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "title" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Course" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "name" text  NOT NULL DEFAULT '',
    "suggestedLevel" text  NOT NULL DEFAULT 'FIRST',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Guardian" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "email" text  NOT NULL DEFAULT '',
    "firstName" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "lastName" text  NOT NULL DEFAULT '',
    "password" text  NOT NULL DEFAULT '',
    "student" text   ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Instructor" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "email" text  NOT NULL DEFAULT '',
    "firstName" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    "lastName" text  NOT NULL DEFAULT '',
    "password" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Page" (
    "content" text  NOT NULL ,
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "data" text  NOT NULL DEFAULT '',
    "id" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."Student" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "firstName" text  NOT NULL DEFAULT '',
    "gradeLevel" text  NOT NULL DEFAULT 'FIRST',
    "id" text  NOT NULL ,
    "lastName" text  NOT NULL DEFAULT '',
    "password" text  NOT NULL DEFAULT '',
    "username" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."_CourseToStudent" (
    "A" text  NOT NULL ,
    "B" text  NOT NULL 
) 

CREATE TABLE "public"."_CourseToInstructor" (
    "A" text  NOT NULL ,
    "B" text  NOT NULL 
) 

CREATE UNIQUE INDEX "Guardian.email" ON "public"."Guardian"("email")

CREATE UNIQUE INDEX "Instructor.email" ON "public"."Instructor"("email")

CREATE UNIQUE INDEX "Student.username" ON "public"."Student"("username")

CREATE UNIQUE INDEX "_CourseToStudent_AB_unique" ON "public"."_CourseToStudent"("A","B")

CREATE UNIQUE INDEX "_CourseToInstructor_AB_unique" ON "public"."_CourseToInstructor"("A","B")

ALTER TABLE "public"."Content" ADD FOREIGN KEY ("course") REFERENCES "public"."Course"("id") ON DELETE SET NULL

ALTER TABLE "public"."Guardian" ADD FOREIGN KEY ("student") REFERENCES "public"."Student"("id") ON DELETE SET NULL

ALTER TABLE "public"."Page" ADD FOREIGN KEY ("content") REFERENCES "public"."Content"("id") ON DELETE RESTRICT

ALTER TABLE "public"."_CourseToStudent" ADD FOREIGN KEY ("A") REFERENCES "public"."Course"("id") ON DELETE CASCADE

ALTER TABLE "public"."_CourseToStudent" ADD FOREIGN KEY ("B") REFERENCES "public"."Student"("id") ON DELETE CASCADE

ALTER TABLE "public"."_CourseToInstructor" ADD FOREIGN KEY ("A") REFERENCES "public"."Course"("id") ON DELETE CASCADE

ALTER TABLE "public"."_CourseToInstructor" ADD FOREIGN KEY ("B") REFERENCES "public"."Instructor"("id") ON DELETE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200130010155-create-base-models
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,79 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url      = "postgres://fwkcolto:xOYiA0kBHa9BwDs0T-rs6wL9wzwmy82Z@rajje.db.elephantsql.com:5432/fwkcolto"
+}
+
+model Content {
+  author    String
+  createdAt DateTime @default(now())
+  id        String   @id @default(uuid())
+  title     String
+  pages     Page[]
+}
+
+model Course {
+  createdAt      DateTime     @default(now())
+  id             String       @id @default(uuid())
+  name           String
+  suggestedLevel GradeLevel
+  students       Student[]
+  contents       Content[]
+  instructors    Instructor[]
+}
+
+model Guardian {
+  id        String   @id @default(uuid())
+  createdAt DateTime @default(now())
+  email     String   @unique
+  firstName String
+  lastName  String
+  password  String
+}
+
+model Instructor {
+  id        String   @id @default(uuid())
+  createdAt DateTime @default(now())
+  email     String   @unique
+  firstName String
+  lastName  String
+  password  String
+  courses   Course[]
+}
+
+model Page {
+  createdAt DateTime @default(now())
+  data      String
+  id        String   @id @default(uuid())
+  content   Content
+}
+
+model Student {
+  createdAt  DateTime   @default(now())
+  firstName  String
+  gradeLevel GradeLevel
+  id         String     @id @default(uuid())
+  lastName   String
+  password   String
+  username   String     @unique
+  guardians  Guardian[]
+  courses    Course[]
+}
+
+enum GradeLevel {
+  FIRST
+  SECOND
+  THIRD
+  FOURTH
+  FIFTH
+  SIXTH
+  SEVENTH
+  EIGHTH
+  NINTH
+  TENTH
+  ELEVENTH
+  TWELVETH
+}
```


